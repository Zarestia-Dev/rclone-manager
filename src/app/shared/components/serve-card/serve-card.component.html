<mat-card class="serve-card" (click)="onCardClick()">
  <mat-card-header class="serve-card-header">
    <div class="serve-info">
      <div class="serve-icon-wrapper">
        <mat-icon [svgIcon]="serveTypeInfo().icon" class="serve-icon"></mat-icon>
      </div>
      <div class="serve-details">
        <div class="serve-title-row">
          @if (showRemoteName()) {
            <span class="serve-remote-name">{{ remoteName() }}</span>
          }
          <span class="serve-protocol-badge">
            {{ serve().params.type | uppercase }}
          </span>
          @if (serve().profile) {
            <span class="serve-profile-badge">{{ serve().profile }}</span>
          }
        </div>

        @if (serveUrl(); as url) {
          <div class="serve-url-container">
            <span
              class="serve-url"
              matTooltip="Click to copy URL"
              matTooltipShowDelay="500"
              (click)="onCopyToClipboard(url, 'URL Copied!'); $event.stopPropagation()"
              role="button"
              tabindex="0"
            >
              {{ url }}
            </span>
          </div>
        } @else {
          <span class="serve-address">{{ serve().addr }}</span>
        }
        <span class="serve-fs">{{ serve().params.fs }}</span>
      </div>
    </div>
    <button
      mat-icon-button
      class="warn"
      (click)="onStopServe(); $event.stopPropagation()"
      matTooltip="Stop this serve"
      matTooltipShowDelay="500"
    >
      <mat-icon svgIcon="stop"></mat-icon>
    </button>
  </mat-card-header>

  <mat-card-footer class="serve-metadata">
    <div class="metadata-row">
      <mat-icon svgIcon="fingerprint" class="metadata-icon"></mat-icon>
      <span class="metadata-label">ID:</span>
      <span
        class="metadata-value"
        matTooltip="Click to copy ID"
        matTooltipShowDelay="500"
        (click)="onCopyToClipboard(serve().id, 'ID Copied!'); $event.stopPropagation()"
        role="button"
        tabindex="1"
      >
        {{ serve().id }}
      </span>
    </div>

    @if (optionKeys().length > 0) {
      <div class="metadata-row">
        <mat-icon svgIcon="gear" class="metadata-icon"></mat-icon>
        <span class="metadata-label">Options:</span>
        <span
          class="metadata-value options-value"
          [matTooltip]="optionsTooltip()"
          matTooltipShowDelay="500"
        >
          {{ optionKeys().length }} active
        </span>
      </div>
    }
  </mat-card-footer>
</mat-card>
