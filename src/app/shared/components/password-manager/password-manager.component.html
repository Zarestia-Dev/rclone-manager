<div class="password-section" [class.entering]="isEntering">
  <!-- Error message with enhanced styling -->
  @if (hasError) {
    <div class="password-description error" @slideInOut [class.shake]="shouldShake">
      {{ errorMessage }}
    </div>
  }

  <div class="password-form">
    <!-- Enhanced password input field -->
    <div class="password-field-container" [class.shake]="shouldShake">
      <mat-form-field appearance="outline" class="password-field">
        <mat-label>Configuration Password</mat-label>
        <input
          matInput
          type="password"
          [value]="password"
          (input)="onPasswordInput($any($event.target).value)"
          [disabled]="isSubmitting || disabled"
          placeholder="Enter your rclone config password"
          autocomplete="current-password"
          #passwordInput
        />
        <mat-icon
          matSuffix
          svgIcon="key"
          [matTooltip]="isSubmitting ? 'Verifying password...' : 'Configuration password required'"
        >
        </mat-icon>
      </mat-form-field>
    </div>

    <!-- Enhanced store password option -->
    @if (showStoreOption) {
      <div class="store-option">
        <mat-checkbox
          [checked]="storePassword"
          (change)="onStoreChange($event.checked)"
          [disabled]="isSubmitting || disabled"
          class="primary"
        ></mat-checkbox>
        <div class="store-option-content">
          <p class="store-label">Remember password securely</p>
          <div class="store-info">
            <mat-icon class="info-icon" svgIcon="shield"></mat-icon>
            <span
              >Password will be stored using your system's secure credential store
              (Keychain/Credential Manager)</span
            >
          </div>
        </div>
      </div>
    }
  </div>
</div>
